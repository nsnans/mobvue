import{t as x,e as N,n as C,T as Z,o as be,g as Ce,p as ne,c as j,f as oe,h as T,i as we,j as M,w as U,m as I,k as xe,H as Ie,I as K,P as Oe,l as Se,q as _e,L as Pe,v as ae,x as ze,y as F,a as pe}from"./index-DjdAsUTe.js";import{B as Le}from"./index-CCnMUQjP.js";import{u as Q,a as Te,C as Be}from"./index-BpqmbPp8.js";import{r as y,f as le,O as se,w as O,s as B,q as r,T as re,P as ie,Q as V,R as ce,e as ue,k as X,l as Ee,F as Ae,t as z,n as H,p as De,o as $e,L as Re,j as Ne,g as de,S as je,B as Me,A as D,I as $,u as W,E as Ue,D as Ye,z as Fe,y as He}from"./vue-D1nMtb7n.js";import{u as fe}from"./use-expose-C5boY_wG.js";let Ke=2e3;const Ve=()=>++Ke,Xe={show:Boolean,zIndex:C,overlay:x,duration:C,teleport:[String,Object],lockScroll:x,lazyRender:x,beforeClose:Function,overlayStyle:Object,overlayClass:N,transitionAppear:Boolean,closeOnClickOverlay:x};function Ge(e,t){return e>t?"horizontal":t>e?"vertical":""}function qe(){const e=y(0),t=y(0),n=y(0),i=y(0),a=y(0),s=y(0),o=y(""),c=y(!0),u=()=>o.value==="vertical",g=()=>o.value==="horizontal",f=()=>{n.value=0,i.value=0,a.value=0,s.value=0,o.value="",c.value=!0};return{move:h=>{const k=h.touches[0];n.value=(k.clientX<0?0:k.clientX)-e.value,i.value=k.clientY-t.value,a.value=Math.abs(n.value),s.value=Math.abs(i.value);const b=10;(!o.value||a.value<b&&s.value<b)&&(o.value=Ge(a.value,s.value)),c.value&&(a.value>Z||s.value>Z)&&(c.value=!1)},start:h=>{f(),e.value=h.touches[0].clientX,t.value=h.touches[0].clientY},reset:f,startX:e,startY:t,deltaX:n,deltaY:i,offsetX:a,offsetY:s,direction:o,isVertical:u,isHorizontal:g,isTap:c}}let p=0;const J="van-overflow-hidden";function Ze(e,t){const n=qe(),i="01",a="10",s=f=>{n.move(f);const d=n.deltaY.value>0?a:i,m=Ce(f.target,e.value),{scrollHeight:h,offsetHeight:k,scrollTop:b}=m;let l="11";b===0?l=k>=h?"00":"01":b+k>=h&&(l="10"),l!=="11"&&n.isVertical()&&!(parseInt(l,2)&parseInt(d,2))&&ne(f,!0)},o=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",s,{passive:!1}),p||document.body.classList.add(J),p++},c=()=>{p&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",s),p--,p||document.body.classList.remove(J))},u=()=>t()&&o(),g=()=>t()&&c();be(u),le(g),se(g),O(t,f=>{f?o():c()})}function ve(e){const t=y(!1);return O(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const[Qe,We]=j("overlay"),Je={show:Boolean,zIndex:C,duration:C,className:N,lockScroll:x,lazyRender:x,customStyle:Object,teleport:[String,Object]};var et=B({name:Qe,props:Je,setup(e,{slots:t}){const n=y(),i=ve(()=>e.show||!e.lazyRender),a=o=>{e.lockScroll&&ne(o,!0)},s=i(()=>{var o;const c=T(we(e.zIndex),e.customStyle);return M(e.duration)&&(c.animationDuration=`${e.duration}s`),V(r("div",{ref:n,style:c,class:[We(),e.className]},[(o=t.default)==null?void 0:o.call(t)]),[[ce,e.show]])});return oe("touchmove",a,{target:n}),()=>{const o=r(re,{name:"van-fade",appear:!0},{default:s});return e.teleport?r(ie,{to:e.teleport},{default:()=>[o]}):o}}});const tt=U(et),nt=T({},Xe,{round:Boolean,position:I("center"),closeIcon:I("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:I("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[ot,ee]=j("popup");var at=B({name:ot,inheritAttrs:!1,props:nt,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:i}){let a,s;const o=y(),c=y(),u=ve(()=>e.show||!e.lazyRender),g=ue(()=>{const v={zIndex:o.value};if(M(e.duration)){const w=e.position==="center"?"animationDuration":"transitionDuration";v[w]=`${e.duration}s`}return v}),f=()=>{a||(a=!0,o.value=e.zIndex!==void 0?+e.zIndex:Ve(),t("open"))},d=()=>{a&&xe(e.beforeClose,{done(){a=!1,t("close"),t("update:show",!1)}})},m=v=>{t("clickOverlay",v),e.closeOnClickOverlay&&d()},h=()=>{if(e.overlay)return r(tt,z({show:e.show,class:e.overlayClass,zIndex:o.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},Q(),{onClick:m}),{default:i["overlay-content"]})},k=v=>{t("clickCloseIcon",v),d()},b=()=>{if(e.closeable)return r(K,{role:"button",tabindex:0,name:e.closeIcon,class:[ee("close-icon",e.closeIconPosition),Ie],classPrefix:e.iconPrefix,onClick:k},null)};let l;const S=()=>{l&&clearTimeout(l),l=setTimeout(()=>{t("opened")})},E=()=>t("closed"),ye=v=>t("keydown",v),he=u(()=>{var v;const{destroyOnClose:w,round:Y,position:A,safeAreaInsetTop:ge,safeAreaInsetBottom:ke,show:q}=e;if(!(!q&&w))return V(r("div",z({ref:c,style:g.value,role:"dialog",tabindex:0,class:[ee({round:Y,[A]:A}),{"van-safe-area-top":ge,"van-safe-area-bottom":ke}],onKeydown:ye},n,Q()),[(v=i.default)==null?void 0:v.call(i),b()]),[[ce,q]])}),G=()=>{const{position:v,transition:w,transitionAppear:Y}=e,A=v==="center"?"van-fade":`van-popup-slide-${v}`;return r(re,{name:w||A,appear:Y,onAfterEnter:S,onAfterLeave:E},{default:he})};return O(()=>e.show,v=>{v&&!a&&(f(),n.tabindex===0&&H(()=>{var w;(w=c.value)==null||w.focus()})),!v&&a&&(a=!1,t("close"))}),fe({popupRef:c}),Ze(c,()=>e.show&&e.lockScroll),oe("popstate",()=>{e.closeOnPopstate&&(d(),s=!1)}),X(()=>{e.show&&f()}),Ee(()=>{s&&(t("update:show",!0),s=!1)}),le(()=>{e.show&&e.teleport&&(d(),s=!0)}),De(Oe,()=>e.show),()=>e.teleport?r(ie,{to:e.teleport},{default:()=>[h(),G()]}):r(Ae,null,[h(),G()])}});const lt=U(at);let L=0;function st(e){e?(L||document.body.classList.add("van-toast--unclickable"),L++):L&&(L--,L||document.body.classList.remove("van-toast--unclickable"))}const[rt,_]=j("toast"),it=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],ct={icon:String,show:Boolean,type:I("text"),overlay:Boolean,message:C,iconSize:C,duration:Se(2e3),position:I("middle"),teleport:[String,Object],wordBreak:String,className:N,iconPrefix:String,transition:I("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:N,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:C};var me=B({name:rt,props:ct,emits:["update:show"],setup(e,{emit:t,slots:n}){let i,a=!1;const s=()=>{const d=e.show&&e.forbidClick;a!==d&&(a=d,st(a))},o=d=>t("update:show",d),c=()=>{e.closeOnClick&&o(!1)},u=()=>clearTimeout(i),g=()=>{const{icon:d,type:m,iconSize:h,iconPrefix:k,loadingType:b}=e;if(d||m==="success"||m==="fail")return r(K,{name:d||m,size:h,class:_("icon"),classPrefix:k},null);if(m==="loading")return r(Pe,{class:_("loading"),size:h,type:b},null)},f=()=>{const{type:d,message:m}=e;if(n.message)return r("div",{class:_("text")},[n.message()]);if(M(m)&&m!=="")return d==="html"?r("div",{key:0,class:_("text"),innerHTML:String(m)},null):r("div",{class:_("text")},[m])};return O(()=>[e.show,e.forbidClick],s),O(()=>[e.show,e.type,e.message,e.duration],()=>{u(),e.show&&e.duration>0&&(i=setTimeout(()=>{o(!1)},e.duration))}),X(s),$e(s),()=>r(lt,z({class:[_([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:c,onClosed:u,"onUpdate:show":o},_e(e,it)),{default:()=>[g(),f()]})}});function ut(){const e=Ne({show:!1}),t=a=>{e.show=a},n=a=>{T(e,a,{transitionAppear:!0}),t(!0)},i=()=>t(!1);return fe({open:n,close:i,toggle:t}),{open:n,close:i,state:e,toggle:t}}function dt(e){const t=Re(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}const ft={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let R=[],vt=!1,te=T({},ft);const mt=new Map;function yt(e){return ze(e)?e:{message:e}}function ht(){const{instance:e}=dt({setup(){const t=y(""),{open:n,state:i,close:a,toggle:s}=ut(),o=()=>{},c=()=>r(me,z(i,{onClosed:o,"onUpdate:show":s}),null);return O(t,u=>{i.message=u}),de().render=c,{open:n,close:a,message:t}}});return e}function gt(){if(!R.length||vt){const e=ht();R.push(e)}return R[R.length-1]}function kt(e={}){if(!ae)return{};const t=gt(),n=yt(e);return t.open(T({},te,mt.get(n.type||te.type),n)),t}U(me);const[bt,P]=j("image"),Ct={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:C,height:C,radius:C,lazyLoad:Boolean,iconSize:C,showError:x,errorIcon:I("photo-fail"),iconPrefix:String,showLoading:x,loadingIcon:I("photo"),crossorigin:String,referrerpolicy:String};var wt=B({name:bt,props:Ct,emits:["load","error"],setup(e,{emit:t,slots:n}){const i=y(!1),a=y(!0),s=y(),{$Lazyload:o}=de().proxy,c=ue(()=>{const l={width:F(e.width),height:F(e.height)};return M(e.radius)&&(l.overflow="hidden",l.borderRadius=F(e.radius)),l});O(()=>e.src,()=>{i.value=!1,a.value=!0});const u=l=>{a.value&&(a.value=!1,t("load",l))},g=()=>{const l=new Event("load");Object.defineProperty(l,"target",{value:s.value,enumerable:!0}),u(l)},f=l=>{i.value=!0,a.value=!1,t("error",l)},d=(l,S,E)=>E?E():r(K,{name:l,size:e.iconSize,class:S,classPrefix:e.iconPrefix},null),m=()=>{if(a.value&&e.showLoading)return r("div",{class:P("loading")},[d(e.loadingIcon,P("loading-icon"),n.loading)]);if(i.value&&e.showError)return r("div",{class:P("error")},[d(e.errorIcon,P("error-icon"),n.error)])},h=()=>{if(i.value||!e.src)return;const l={alt:e.alt,class:P("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?V(r("img",z({ref:s},l),null),[[je("lazy"),e.src]]):r("img",z({ref:s,src:e.src,onLoad:u,onError:f},l),null)},k=({el:l})=>{const S=()=>{l===s.value&&a.value&&g()};s.value?S():H(S)},b=({el:l})=>{l===s.value&&!i.value&&f()};return o&&ae&&(o.$on("loaded",k),o.$on("error",b),se(()=>{o.$off("loaded",k),o.$off("error",b)})),X(()=>{H(()=>{var l;(l=s.value)!=null&&l.complete&&!e.lazyLoad&&g()})}),()=>{var l;return r("div",{class:P({round:e.round,block:e.block}),style:c.value},[h(),m(),(l=n.default)==null?void 0:l.call(n)])}}});const xt=U(wt),It="/mobvue/favicon.png",Ot={"un-py-16px":""},St={"un-flex-y-center":"","un-gap-16px":""},_t={"un-flex":"","un-flex-col":""},Pt={"un-fw-600":""},Et=B({__name:"index",setup(e){const t=Fe(),n=pe();function i(){kt("更多功能，敬请期待 ~")}function a(){n.resetToken(),t.push("/login")}return(s,o)=>{const c=xt,u=Te,g=Be,f=Le;return He(),Me("div",Ot,[r(g,{"un-mb-8px":""},{default:D(()=>[r(u,{size:"large","is-link":"",center:"",onClick:i},{title:D(()=>[$("div",St,[r(c,{src:W(It),"un-w-44px":"","un-h-44px":""},null,8,["src"]),$("div",_t,[$("span",Pt,Ue(W(n).username),1),o[0]||(o[0]=$("span",{"un-text-14px":"","un-color-hex-969799":""},"个人资料",-1))])])]),_:1})]),_:1}),r(g,{"un-mb-8px":""},{default:D(()=>[r(u,{title:"📚 中文文档","is-link":"",url:"https://juejin.cn/column/7472609448201666599"}),r(u,{title:"📦️ 代码仓库","is-link":"",url:"https://github.com/un-pany/mobvue"}),r(u,{title:"☕ Donate 捐赠","is-link":"",url:"https://github.com/un-pany/mobvue/issues/1"}),r(u,{title:"💰 付费服务","is-link":"",url:"https://github.com/un-pany/mobvue/issues/2"})]),_:1}),r(f,{block:"",onClick:a,"un-b-0px":"","un-rounded-0px":""},{default:D(()=>o[1]||(o[1]=[Ye(" 退出登录 ")])),_:1})])}}});export{Et as default};
