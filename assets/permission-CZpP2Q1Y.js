import{e as p,n as A,c as z,u as N,y as F,w as G,h as $,t as O,Y,I as j,z as V,G as H,q as K,Z as L,a as D}from"./index-By4TLlyP.js";import{C as T,a as Z}from"./index-DwdcQsK2.js";import{_ as J}from"./NoticeBar.vue_vue_type_script_setup_true_lang-BQoKiZOK.js";import{s as _,w as M,q as a,r as E,e as f,t as Q,B as W,A as b,h as X,u as S,R as x,x as R,H as B,U as ee,y as P}from"./vue-jg-N22bW.js";import"./use-expose-e9h6Y_ix.js";const[I,ne]=z("radio-group"),oe={shape:String,disabled:Boolean,iconSize:A,direction:String,modelValue:p,checkedColor:String},U=Symbol(I);var ae=_({name:I,props:oe,emits:["change","update:modelValue"],setup(e,{emit:i,slots:t}){const{linkChildren:d}=N(U),l=n=>i("update:modelValue",n);return M(()=>e.modelValue,n=>i("change",n)),d({props:e,updateValue:l}),F(()=>e.modelValue),()=>{var n;return a("div",{class:ne([e.direction]),role:"radiogroup"},[(n=t.default)==null?void 0:n.call(t)])}}});const te=G(ae),q={name:p,disabled:Boolean,iconSize:A,modelValue:p,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var le=_({props:$({},q,{bem:Y(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:O,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(e,{emit:i,slots:t}){const d=E(),l=o=>{if(e.parent&&e.bindGroup)return e.parent.props[o]},n=f(()=>{if(e.parent&&e.bindGroup){const o=l("disabled")||e.disabled;if(e.role==="checkbox"){const u=l("modelValue").length,c=l("max"),v=c&&u>=+c;return o||v&&!e.checked}return o}return e.disabled}),h=f(()=>l("direction")),r=f(()=>{const o=e.checkedColor||l("checkedColor");if(o&&e.checked&&!n.value)return{borderColor:o,backgroundColor:o}}),s=f(()=>e.shape||l("shape")||"round"),g=o=>{const{target:u}=o,c=d.value,v=c===u||(c==null?void 0:c.contains(u));!n.value&&(v||!e.labelDisabled)&&i("toggle"),i("click",o)},k=()=>{var o,u;const{bem:c,checked:v,indeterminate:y}=e,C=e.iconSize||l("iconSize");return a("div",{ref:d,class:c("icon",[s.value,{disabled:n.value,checked:v,indeterminate:y}]),style:s.value!=="dot"?{fontSize:V(C)}:{width:V(C),height:V(C),borderColor:(o=r.value)==null?void 0:o.borderColor}},[t.icon?t.icon({checked:v,disabled:n.value}):s.value!=="dot"?a(j,{name:y?"minus":"success",style:r.value},null):a("div",{class:c("icon--dot__icon"),style:{backgroundColor:(u=r.value)==null?void 0:u.backgroundColor}},null)])},m=()=>{const{checked:o}=e;if(t.default)return a("span",{class:e.bem("label",[e.labelPosition,{disabled:n.value}])},[t.default({checked:o,disabled:n.value})])};return()=>{const o=e.labelPosition==="left"?[m(),k()]:[k(),m()];return a("div",{role:e.role,class:e.bem([{disabled:n.value,"label-disabled":e.labelDisabled},h.value]),tabindex:n.value?void 0:0,"aria-checked":e.checked,onClick:g},[o])}}});const ie=$({},q,{shape:String}),[de,re]=z("radio");var ce=_({name:de,props:ie,emits:["update:modelValue"],setup(e,{emit:i,slots:t}){const{parent:d}=H(U),l=()=>(d?d.props.modelValue:e.modelValue)===e.name,n=()=>{d?d.updateValue(e.name):i("update:modelValue",e.name)};return()=>a(le,Q({bem:re,role:"radio",parent:d,checked:l(),onToggle:n},e),K(t,["default","icon"]))}});const se=G(ce);function w(e){if(L(e)&&e.length>0){const{roles:i}=D();return i.some(t=>e.includes(t))}else return console.error("参数必须是一个数组且长度大于 0，参考：checkPermission(['admin', 'editor'])"),!1}const ke=_({__name:"permission",setup(e){const i=D(),t=E(i.roles[0]);function d(l){i.changeRoles(l)}return(l,n)=>{const h=se,r=Z,s=T,g=te,k=ee("permission");return P(),W("div",null,[a(J,{text:"基于权限指令、权限函数实现的按钮级控制"}),a(g,{modelValue:S(t),"onUpdate:modelValue":n[2]||(n[2]=m=>X(t)?t.value=m:null),onChange:d},{default:b(()=>[a(s,{title:"切换用户",inset:""},{default:b(()=>[a(r,{title:"Admin 用户",onClick:n[0]||(n[0]=m=>t.value="admin")},{"right-icon":b(()=>[a(h,{name:"admin"})]),_:1}),a(r,{title:"Editor 用户",onClick:n[1]||(n[1]=m=>t.value="editor")},{"right-icon":b(()=>[a(h,{name:"editor"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(s,{title:"权限指令",inset:""},{default:b(()=>[x(a(r,{title:"Admin 可见",value:"Role admin"},null,512),[[k,["admin"]]]),x(a(r,{title:"Admin 或 Editor 可见",value:"Role admin or editor"},null,512),[[k,["admin","editor"]]])]),_:1}),a(s,{title:"权限函数",inset:""},{default:b(()=>[S(w)(["admin"])?(P(),R(r,{key:0,title:"Admin 可见",value:"Role admin"})):B("",!0),S(w)(["admin","editor"])?(P(),R(r,{key:1,title:"Admin 或 Editor 可见",value:"Role admin or editor"})):B("",!0)]),_:1})])}}});export{ke as default};
