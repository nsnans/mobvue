import{c as T,t as y,n as k,u as A,p as q,F as C,w as N,r as z,a as D}from"./index-Dcbs2StI.js";import{B as I}from"./index-CnF-V_n1.js";import{C as M}from"./index-B6tD3eOy.js";import{F as U}from"./index-BBv9r2vo.js";import{_ as O}from"./Description.vue_vue_type_script_setup_true_lang-CgmizABB.js";import{s as x,q as i,r as R,l as $,B as j,A as B,y as G,z as K,I as W,u as m,D as Y}from"./vue-BO4yIn0S.js";import{u as H}from"./use-expose-CuP2z4yu.js";const[J,L]=T("form"),Q={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:k,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:y,showErrorMessage:y,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var X=x({name:J,props:Q,emits:["submit","failed"],setup(u,{emit:f,slots:p}){const{children:s,linkChildren:a}=A(C),c=e=>e?s.filter(t=>e.includes(t.name)):s,g=e=>new Promise((t,o)=>{const n=[];c(e).reduce((F,P)=>F.then(()=>{if(!n.length)return P.validate().then(S=>{S&&n.push(S)})}),Promise.resolve()).then(()=>{n.length?o(n):t()})}),l=e=>new Promise((t,o)=>{const n=c(e);Promise.all(n.map(r=>r.validate())).then(r=>{r=r.filter(Boolean),r.length?o(r):t()})}),v=e=>{const t=s.find(o=>o.name===e);return t?new Promise((o,n)=>{t.validate().then(r=>{r?n(r):o()})}):Promise.reject()},_=e=>typeof e=="string"?v(e):u.validateFirst?g(e):l(e),h=e=>{typeof e=="string"&&(e=[e]),c(e).forEach(o=>{o.resetValidation()})},b=()=>s.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),d=(e,t)=>{s.some(o=>o.name===e?(o.$el.scrollIntoView(t),!0):!1)},V=()=>s.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),w=()=>{const e=V();_().then(()=>f("submit",e)).catch(t=>{f("failed",{values:e,errors:t});const{scrollToError:o,scrollToErrorPosition:n}=u;o&&t[0].name&&d(t[0].name,n?{block:n}:void 0)})},E=e=>{q(e),w()};return a({props:u}),H({submit:w,validate:_,getValues:V,scrollToField:d,resetValidation:h,getValidationStatus:b}),()=>{var e;return i("form",{class:L(),onSubmit:E},[(e=p.default)==null?void 0:e.call(p)])}}});const Z=N(X);function ee(u){return z({url:"auth/login",method:"post",data:u})}const te={"un-h-full":"","un-flex-center":"","un-flex-col":"","un-select-none":""},oe={"un-mx-16px":"","un-my-32px":""},de=x({__name:"index",setup(u){const f=K(),p=D(),s=R(!1),a=$({username:"admin",password:"12345678"});function c(){s.value=!0,ee(a).then(({data:g})=>{p.setToken(g.token),f.push("/")}).catch(()=>{a.password=""}).finally(()=>{s.value=!1})}return(g,l)=>{const v=U,_=M,h=I,b=Z;return G(),j("div",te,[i(O,{"un-mb-20px":""}),i(b,{onSubmit:c},{default:B(()=>[i(_,{inset:""},{default:B(()=>[i(v,{modelValue:m(a).username,"onUpdate:modelValue":l[0]||(l[0]=d=>m(a).username=d),name:"username",label:"用户名",size:"large",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),i(v,{modelValue:m(a).password,"onUpdate:modelValue":l[1]||(l[1]=d=>m(a).password=d),type:"password",name:"password",label:"密码",size:"large",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])]),_:1}),W("div",oe,[i(h,{loading:m(s),type:"primary","native-type":"submit",size:"large",round:"",block:""},{default:B(()=>l[2]||(l[2]=[Y(" 登 录 ")])),_:1},8,["loading"])])]),_:1})])}}});export{de as default};
