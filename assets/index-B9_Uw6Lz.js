import{t as x,e as I,n as b,T as W,o as we,g as xe,p as oe,c as D,f as ae,h as V,i as Se,j as U,w as A,k as Ie,m as S,l as Oe,H as _e,I as X,P as ze,q as Pe,v as Be,L as le,x as se,y as Le,z as Te,A as M,a as Ee,B as pe}from"./index-BjVEiZNP.js";import{B as De}from"./index-CHCXvYve.js";import{u as J,C as Ve,a as Ae}from"./index-CXT7qU26.js";import{r as g,h as ie,t as re,w as O,s as L,q as l,T as ce,Q as ue,R as G,S as de,l as fe,o as q,f as $e,F as Re,x as B,n as K,p as Ne,g as je,N as Me,e as Ue,k as ve,U as Fe,y as Ye,E as T,z as He,K as N,u as Y,A as Ke,i as Xe,H as Ge,D as qe}from"./vue-D1P3Ll_e.js";import{u as me}from"./use-expose-DYQpE_8P.js";const Ze={show:Boolean,zIndex:b,overlay:x,duration:b,teleport:[String,Object],lockScroll:x,lazyRender:x,beforeClose:Function,overlayStyle:Object,overlayClass:I,transitionAppear:Boolean,closeOnClickOverlay:x};function Qe(e,t){return e>t?"horizontal":t>e?"vertical":""}function We(){const e=g(0),t=g(0),n=g(0),s=g(0),a=g(0),r=g(0),o=g(""),c=g(!0),y=()=>o.value==="vertical",f=()=>o.value==="horizontal",v=()=>{n.value=0,s.value=0,a.value=0,r.value=0,o.value="",c.value=!0};return{move:m=>{const k=m.touches[0];n.value=(k.clientX<0?0:k.clientX)-e.value,s.value=k.clientY-t.value,a.value=Math.abs(n.value),r.value=Math.abs(s.value);const C=10;(!o.value||a.value<C&&r.value<C)&&(o.value=Qe(a.value,r.value)),c.value&&(a.value>W||r.value>W)&&(c.value=!1)},start:m=>{v(),e.value=m.touches[0].clientX,t.value=m.touches[0].clientY},reset:v,startX:e,startY:t,deltaX:n,deltaY:s,offsetX:a,offsetY:r,direction:o,isVertical:y,isHorizontal:f,isTap:c}}let E=0;const ee="van-overflow-hidden";function Je(e,t){const n=We(),s="01",a="10",r=v=>{n.move(v);const u=n.deltaY.value>0?a:s,d=xe(v.target,e.value),{scrollHeight:m,offsetHeight:k,scrollTop:C}=d;let i="11";C===0?i=k>=m?"00":"01":C+k>=m&&(i="10"),i!=="11"&&n.isVertical()&&!(parseInt(i,2)&parseInt(u,2))&&oe(v,!0)},o=()=>{document.addEventListener("touchstart",n.start),document.addEventListener("touchmove",r,{passive:!1}),E||document.body.classList.add(ee),E++},c=()=>{E&&(document.removeEventListener("touchstart",n.start),document.removeEventListener("touchmove",r),E--,E||document.body.classList.remove(ee))},y=()=>t()&&o(),f=()=>t()&&c();we(y),ie(f),re(f),O(t,v=>{v?o():c()})}function ye(e){const t=g(!1);return O(e,n=>{n&&(t.value=n)},{immediate:!0}),n=>()=>t.value?n():null}const[et,tt]=D("overlay"),nt={show:Boolean,zIndex:b,duration:b,className:I,lockScroll:x,lazyRender:x,customStyle:Object,teleport:[String,Object]};var ot=L({name:et,props:nt,setup(e,{slots:t}){const n=g(),s=ye(()=>e.show||!e.lazyRender),a=o=>{e.lockScroll&&oe(o,!0)},r=s(()=>{var o;const c=V(Se(e.zIndex),e.customStyle);return U(e.duration)&&(c.animationDuration=`${e.duration}s`),G(l("div",{ref:n,style:c,class:[tt(),e.className]},[(o=t.default)==null?void 0:o.call(t)]),[[de,e.show]])});return ae("touchmove",a,{target:n}),()=>{const o=l(ce,{name:"van-fade",appear:!0},{default:r});return e.teleport?l(ue,{to:e.teleport},{default:()=>[o]}):o}}});const at=A(ot),lt=V({},Ze,{round:Boolean,position:S("center"),closeIcon:S("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:S("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[st,te]=D("popup");var it=L({name:st,inheritAttrs:!1,props:lt,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:n,slots:s}){let a,r;const o=g(),c=g(),y=ye(()=>e.show||!e.lazyRender),f=fe(()=>{const h={zIndex:o.value};if(U(e.duration)){const w=e.position==="center"?"animationDuration":"transitionDuration";h[w]=`${e.duration}s`}return h}),v=()=>{a||(a=!0,o.value=e.zIndex!==void 0?+e.zIndex:Ie(),t("open"))},u=()=>{a&&Oe(e.beforeClose,{done(){a=!1,t("close"),t("update:show",!1)}})},d=h=>{t("clickOverlay",h),e.closeOnClickOverlay&&u()},m=()=>{if(e.overlay)return l(at,B({show:e.show,class:e.overlayClass,zIndex:o.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},J(),{onClick:d}),{default:s["overlay-content"]})},k=h=>{t("clickCloseIcon",h),u()},C=()=>{if(e.closeable)return l(X,{role:"button",tabindex:0,name:e.closeIcon,class:[te("close-icon",e.closeIconPosition),_e],classPrefix:e.iconPrefix,onClick:k},null)};let i;const _=()=>{i&&clearTimeout(i),i=setTimeout(()=>{t("opened")})},$=()=>t("closed"),ge=h=>t("keydown",h),ke=y(()=>{var h;const{destroyOnClose:w,round:F,position:R,safeAreaInsetTop:Ce,safeAreaInsetBottom:be,show:Q}=e;if(!(!Q&&w))return G(l("div",B({ref:c,style:f.value,role:"dialog",tabindex:0,class:[te({round:F,[R]:R}),{"van-safe-area-top":Ce,"van-safe-area-bottom":be}],onKeydown:ge},n,J()),[(h=s.default)==null?void 0:h.call(s),C()]),[[de,Q]])}),Z=()=>{const{position:h,transition:w,transitionAppear:F}=e,R=h==="center"?"van-fade":`van-popup-slide-${h}`;return l(ce,{name:w||R,appear:F,onAfterEnter:_,onAfterLeave:$},{default:ke})};return O(()=>e.show,h=>{h&&!a&&(v(),n.tabindex===0&&K(()=>{var w;(w=c.value)==null||w.focus()})),!h&&a&&(a=!1,t("close"))}),me({popupRef:c}),Je(c,()=>e.show&&e.lockScroll),ae("popstate",()=>{e.closeOnPopstate&&(u(),r=!1)}),q(()=>{e.show&&v()}),$e(()=>{r&&(t("update:show",!0),r=!1)}),ie(()=>{e.show&&e.teleport&&(u(),r=!0)}),Ne(ze,()=>e.show),()=>e.teleport?l(ue,{to:e.teleport},{default:()=>[m(),Z()]}):l(Re,null,[m(),Z()])}});const rt=A(it);let p=0;function ct(e){e?(p||document.body.classList.add("van-toast--unclickable"),p++):p&&(p--,p||document.body.classList.remove("van-toast--unclickable"))}const[ut,z]=D("toast"),dt=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay","zIndex"],ft={icon:String,show:Boolean,type:S("text"),overlay:Boolean,message:b,iconSize:b,duration:Pe(2e3),position:S("middle"),teleport:[String,Object],wordBreak:String,className:I,iconPrefix:String,transition:S("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:I,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,zIndex:b};var he=L({name:ut,props:ft,emits:["update:show"],setup(e,{emit:t,slots:n}){let s,a=!1;const r=()=>{const u=e.show&&e.forbidClick;a!==u&&(a=u,ct(a))},o=u=>t("update:show",u),c=()=>{e.closeOnClick&&o(!1)},y=()=>clearTimeout(s),f=()=>{const{icon:u,type:d,iconSize:m,iconPrefix:k,loadingType:C}=e;if(u||d==="success"||d==="fail")return l(X,{name:u||d,size:m,class:z("icon"),classPrefix:k},null);if(d==="loading")return l(le,{class:z("loading"),size:m,type:C},null)},v=()=>{const{type:u,message:d}=e;if(n.message)return l("div",{class:z("text")},[n.message()]);if(U(d)&&d!=="")return u==="html"?l("div",{key:0,class:z("text"),innerHTML:String(d)},null):l("div",{class:z("text")},[d])};return O(()=>[e.show,e.forbidClick],r),O(()=>[e.show,e.type,e.message,e.duration],()=>{y(),e.show&&e.duration>0&&(s=setTimeout(()=>{o(!1)},e.duration))}),q(r),je(r),()=>l(rt,B({class:[z([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:c,onClosed:y,"onUpdate:show":o},Be(e,dt)),{default:()=>[f(),v()]})}});function vt(){const e=Ue({show:!1}),t=a=>{e.show=a},n=a=>{V(e,a,{transitionAppear:!0}),t(!0)},s=()=>t(!1);return me({open:n,close:s,toggle:t}),{open:n,close:s,state:e,toggle:t}}function mt(e){const t=Me(e),n=document.createElement("div");return document.body.appendChild(n),{instance:t.mount(n),unmount(){t.unmount(),document.body.removeChild(n)}}}const yt={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let j=[],ht=!1,ne=V({},yt);const gt=new Map;function kt(e){return Le(e)?e:{message:e}}function Ct(){const{instance:e}=mt({setup(){const t=g(""),{open:n,state:s,close:a,toggle:r}=vt(),o=()=>{},c=()=>l(he,B(s,{onClosed:o,"onUpdate:show":r}),null);return O(t,y=>{s.message=y}),ve().render=c,{open:n,close:a,message:t}}});return e}function bt(){if(!j.length||ht){const e=Ct();j.push(e)}return j[j.length-1]}function wt(e={}){if(!se)return{};const t=bt(),n=kt(e);return t.open(V({},ne,gt.get(n.type||ne.type),n)),t}A(he);const[xt,H]=D("switch"),St={size:b,loading:Boolean,disabled:Boolean,modelValue:I,activeColor:String,inactiveColor:String,activeValue:{type:I,default:!0},inactiveValue:{type:I,default:!1}};var It=L({name:xt,props:St,emits:["change","update:modelValue"],setup(e,{emit:t,slots:n}){const s=()=>e.modelValue===e.activeValue,a=()=>{if(!e.disabled&&!e.loading){const o=s()?e.inactiveValue:e.activeValue;t("update:modelValue",o),t("change",o)}},r=()=>{if(e.loading){const o=s()?e.activeColor:e.inactiveColor;return l(le,{class:H("loading"),color:o},null)}if(n.node)return n.node()};return Te(()=>e.modelValue),()=>{var o;const{size:c,loading:y,disabled:f,activeColor:v,inactiveColor:u}=e,d=s(),m={fontSize:M(c),backgroundColor:d?v:u};return l("div",{role:"switch",class:H({on:d,loading:y,disabled:f}),style:m,tabindex:f?void 0:0,"aria-checked":d,onClick:a},[l("div",{class:H("node")},[r()]),(o=n.background)==null?void 0:o.call(n)])}}});const Ot=A(It),[_t,P]=D("image"),zt={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:b,height:b,radius:b,lazyLoad:Boolean,iconSize:b,showError:x,errorIcon:S("photo-fail"),iconPrefix:String,showLoading:x,loadingIcon:S("photo"),crossorigin:String,referrerpolicy:String};var Pt=L({name:_t,props:zt,emits:["load","error"],setup(e,{emit:t,slots:n}){const s=g(!1),a=g(!0),r=g(),{$Lazyload:o}=ve().proxy,c=fe(()=>{const i={width:M(e.width),height:M(e.height)};return U(e.radius)&&(i.overflow="hidden",i.borderRadius=M(e.radius)),i});O(()=>e.src,()=>{s.value=!1,a.value=!0});const y=i=>{a.value&&(a.value=!1,t("load",i))},f=()=>{const i=new Event("load");Object.defineProperty(i,"target",{value:r.value,enumerable:!0}),y(i)},v=i=>{s.value=!0,a.value=!1,t("error",i)},u=(i,_,$)=>$?$():l(X,{name:i,size:e.iconSize,class:_,classPrefix:e.iconPrefix},null),d=()=>{if(a.value&&e.showLoading)return l("div",{class:P("loading")},[u(e.loadingIcon,P("loading-icon"),n.loading)]);if(s.value&&e.showError)return l("div",{class:P("error")},[u(e.errorIcon,P("error-icon"),n.error)])},m=()=>{if(s.value||!e.src)return;const i={alt:e.alt,class:P("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?G(l("img",B({ref:r},i),null),[[Fe("lazy"),e.src]]):l("img",B({ref:r,src:e.src,onLoad:y,onError:v},i),null)},k=({el:i})=>{const _=()=>{i===r.value&&a.value&&f()};r.value?_():K(_)},C=({el:i})=>{i===r.value&&!s.value&&v()};return o&&se&&(o.$on("loaded",k),o.$on("error",C),re(()=>{o.$off("loaded",k),o.$off("error",C)})),q(()=>{K(()=>{var i;(i=r.value)!=null&&i.complete&&!e.lazyLoad&&f()})}),()=>{var i;return l("div",{class:P({round:e.round,block:e.block}),style:c.value},[m(),d(),(i=n.default)==null?void 0:i.call(n)])}}});const Bt=A(Pt),Lt="/mobvue/favicon.png",Tt={"un-py-16px":""},Et={"un-flex-y-center":"","un-gap-16px":""},pt={"un-flex":"","un-flex-col":""},Dt={"un-fw-600":""},jt=L({__name:"index",setup(e){const t=qe(),n=Ee(),{isDark:s}=pe();function a(){wt("更多功能，敬请期待 ~")}function r(){n.resetToken(),t.push("/login")}return(o,c)=>{const y=Bt,f=Ae,v=Ve,u=Ot,d=De;return He(),Ye("div",Tt,[l(v,{"un-mb-8px":""},{default:T(()=>[l(f,{size:"large","is-link":"",center:"",onClick:a},{title:T(()=>[N("div",Et,[l(y,{src:Y(Lt),"un-w-44px":"","un-h-44px":""},null,8,["src"]),N("div",pt,[N("span",Dt,Ke(Y(n).username),1),c[1]||(c[1]=N("span",{"un-text-14px":"","un-color-hex-969799":""},"个人资料",-1))])])]),_:1})]),_:1}),l(v,{"un-mb-8px":""},{default:T(()=>[l(f,{title:"🌗 Dark Mode",center:""},{"right-icon":T(()=>[l(u,{modelValue:Y(s),"onUpdate:modelValue":c[0]||(c[0]=m=>Xe(s)?s.value=m:null),size:"min(5.333vw, 40px)"},null,8,["modelValue"])]),_:1}),l(f,{title:"📚 中文文档","is-link":"",url:"https://juejin.cn/column/7472609448201666599"}),l(f,{title:"📦️ 代码仓库","is-link":"",url:"https://github.com/un-pany/mobvue"}),l(f,{title:"☕ Donate 捐赠","is-link":"",url:"https://github.com/un-pany/mobvue/issues/1"}),l(f,{title:"💰 付费服务","is-link":"",url:"https://github.com/un-pany/mobvue/issues/2"})]),_:1}),l(d,{block:"",onClick:r,"un-b-0px":"","un-rounded-0px":""},{default:T(()=>c[2]||(c[2]=[Ge(" 退出登录 ")])),_:1})])}}});export{jt as default};
