import{g as C,q as E,r as b,k as W,w as q,M as D,N as M,m as c}from"./vue-d1Hrfj2O.js";import{e as P,c as L,x as v,E as $,G as A,o as G,I,H as R,J as x,i as H,K as J,w as K}from"./index-CLa7DgHf.js";function O(e){const s=C();s&&P(s.proxy,e)}const[V,l]=L("notice-bar"),X={text:String,mode:String,color:String,delay:v(1),speed:v(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var _=E({name:V,props:X,emits:["close","replay"],setup(e,{emit:s,slots:a}){let f=0,o=0,h;const d=b(),m=b(),t=W({show:!0,offset:0,duration:0}),y=()=>{if(a["left-icon"])return a["left-icon"]();if(e.leftIcon)return c(I,{class:l("left-icon"),name:e.leftIcon},null)},p=()=>{if(e.mode==="closeable")return"cross";if(e.mode==="link")return"arrow"},k=n=>{e.mode==="closeable"&&(t.show=!1,s("close",n))},N=()=>{if(a["right-icon"])return a["right-icon"]();const n=p();if(n)return c(I,{name:n,class:l("right-icon"),onClick:k},null)},S=()=>{t.offset=f,t.duration=0,J(()=>{x(()=>{t.offset=-o,t.duration=(o+f)/+e.speed,s("replay")})})},T=()=>{const n=e.scrollable===!1&&!e.wrapable,i={transform:t.offset?`translateX(${t.offset}px)`:"",transitionDuration:`${t.duration}s`};return c("div",{ref:d,role:"marquee",class:l("wrap")},[c("div",{ref:m,style:i,class:[l("content"),{"van-ellipsis":n}],onTransitionend:S},[a.default?a.default():e.text])])},r=()=>{const{delay:n,speed:i,scrollable:u}=e,B=H(n)?+n*1e3:0;f=0,o=0,t.offset=0,t.duration=0,clearTimeout(h),h=setTimeout(()=>{if(!d.value||!m.value||u===!1)return;const w=R(d).width,g=R(m).width;(u||g>w)&&x(()=>{f=w,o=g,t.offset=-o,t.duration=o/+i})},B)};return $(r),A(r),G("pageshow",r),O({reset:r}),q(()=>[e.text,e.scrollable],r),()=>{const{color:n,wrapable:i,background:u}=e;return D(c("div",{role:"alert",class:l({wrapable:i}),style:{color:n,background:u}},[y(),T(),N()]),[[M,t.show]])}}});const F=K(_);export{F as N,O as u};
