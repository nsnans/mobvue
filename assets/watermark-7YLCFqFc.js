import{n as D,m as I,c as U,e as ee,A as re,l as ae,w as G,a as ie,D as oe,b as le,I as q,v as se,x as H,E as ce,G as ue,o as fe,H as de,J as V,K as X,i as me}from"./index-Bks0rqou.js";import{q as P,j as be,m as d,r as j,k as ge,w as ve,L as ye,M as he,N as pe,A as xe,H as N,z as O,u as E,x as ke,C}from"./vue-BWqbLn5e.js";import{u as we}from"./use-expose-C-5MjlA1.js";const[Se,M]=U("loading"),Te=Array(12).fill(null).map((e,n)=>d("i",{class:M("line",String(n+1))},null)),Oe=d("svg",{class:M("circular"),viewBox:"25 25 50 50"},[d("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Ee={size:D,type:I("circular"),color:String,vertical:Boolean,textSize:D,textColor:String};var Ce=P({name:Se,props:Ee,setup(e,{slots:n}){const o=be(()=>ee({color:e.color},re(e.size))),r=()=>{const b=e.type==="spinner"?Te:Oe;return d("span",{class:M("spinner",e.type),style:o.value},[n.icon?n.icon():b])},a=()=>{var b;if(n.default)return d("span",{class:M("text"),style:{fontSize:ae(e.textSize),color:(b=e.textColor)!=null?b:e.color}},[n.default()])};return()=>{const{type:b,vertical:g}=e;return d("div",{class:M([b,{vertical:g}]),"aria-live":"polite","aria-busy":!0},[r(),a()])}}});const ze=G(Ce),[Ie,z]=U("button"),Re=ee({},le,{tag:I("button"),text:String,icon:String,type:I("default"),size:I("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:I("button"),loadingSize:D,loadingText:String,loadingType:String,iconPosition:I("left")});var We=P({name:Ie,props:Re,emits:["click"],setup(e,{emit:n,slots:o}){const r=ie(),a=()=>o.loading?o.loading():d(ze,{size:e.loadingSize,type:e.loadingType,class:z("loading")},null),b=()=>{if(e.loading)return a();if(o.icon)return d("div",{class:z("icon")},[o.icon()]);if(e.icon)return d(q,{name:e.icon,class:z("icon"),classPrefix:e.iconPrefix},null)},g=()=>{let l;if(e.loading?l=e.loadingText:l=o.default?o.default():e.text,l)return d("span",{class:z("text")},[l])},t=()=>{const{color:l,plain:y}=e;if(l){const v={color:y?l:"white"};return y||(v.background=l),l.includes("gradient")?v.border=0:v.borderColor=l,v}},c=l=>{e.loading?se(l):e.disabled||(n("click",l),r())};return()=>{const{tag:l,type:y,size:v,block:k,round:w,plain:T,square:i,loading:s,disabled:u,hairline:m,nativeType:p,iconPosition:S}=e,x=[z([y,v,{plain:T,block:k,round:w,square:i,loading:s,disabled:u,hairline:m}]),{[oe]:m}];return d(l,{type:p,class:x,style:t(),disabled:u,onClick:c},{default:()=>[d("div",{class:z("content")},[S==="left"&&b(),g(),S==="right"&&b()])]})}}});const Be=G(We),[Me,W]=U("notice-bar"),$e={text:String,mode:String,color:String,delay:H(1),speed:H(60),leftIcon:String,wrapable:Boolean,background:String,scrollable:{type:Boolean,default:null}};var je=P({name:Me,props:$e,emits:["close","replay"],setup(e,{emit:n,slots:o}){let r=0,a=0,b;const g=j(),t=j(),c=ge({show:!0,offset:0,duration:0}),l=()=>{if(o["left-icon"])return o["left-icon"]();if(e.leftIcon)return d(q,{class:W("left-icon"),name:e.leftIcon},null)},y=()=>{if(e.mode==="closeable")return"cross";if(e.mode==="link")return"arrow"},v=s=>{e.mode==="closeable"&&(c.show=!1,n("close",s))},k=()=>{if(o["right-icon"])return o["right-icon"]();const s=y();if(s)return d(q,{name:s,class:W("right-icon"),onClick:v},null)},w=()=>{c.offset=r,c.duration=0,de(()=>{V(()=>{c.offset=-a,c.duration=(a+r)/+e.speed,n("replay")})})},T=()=>{const s=e.scrollable===!1&&!e.wrapable,u={transform:c.offset?`translateX(${c.offset}px)`:"",transitionDuration:`${c.duration}s`};return d("div",{ref:g,role:"marquee",class:W("wrap")},[d("div",{ref:t,style:u,class:[W("content"),{"van-ellipsis":s}],onTransitionend:w},[o.default?o.default():e.text])])},i=()=>{const{delay:s,speed:u,scrollable:m}=e,p=me(s)?+s*1e3:0;r=0,a=0,c.offset=0,c.duration=0,clearTimeout(b),b=setTimeout(()=>{if(!g.value||!t.value||m===!1)return;const S=X(g).width,x=X(t).width;(m||x>S)&&V(()=>{r=S,a=x,c.offset=-a,c.duration=a/+u})},p)};return ce(i),ue(i),fe("pageshow",i),we({reset:i}),ve(()=>[e.text,e.scrollable],i),()=>{const{color:s,wrapable:u,background:m}=e;return ye(d("div",{role:"alert",class:W({wrapable:u}),style:{color:s,background:m}},[l(),T(),k()]),[[he,c.show]])}}});const Le=G(je);var Pe=typeof global=="object"&&global&&global.Object===Object&&global,Ne=typeof self=="object"&&self&&self.Object===Object&&self,te=Pe||Ne||Function("return this")(),L=te.Symbol,ne=Object.prototype,_e=ne.hasOwnProperty,De=ne.toString,B=L?L.toStringTag:void 0;function qe(e){var n=_e.call(e,B),o=e[B];try{e[B]=void 0;var r=!0}catch{}var a=De.call(e);return r&&(n?e[B]=o:delete e[B]),a}var Ae=Object.prototype,Ue=Ae.toString;function Ge(e){return Ue.call(e)}var Fe="[object Null]",He="[object Undefined]",J=L?L.toStringTag:void 0;function Ve(e){return e==null?e===void 0?He:Fe:J&&J in Object(e)?qe(e):Ge(e)}function Xe(e){return e!=null&&typeof e=="object"}var Je="[object Symbol]";function Ke(e){return typeof e=="symbol"||Xe(e)&&Ve(e)==Je}var Qe=/\s/;function Ye(e){for(var n=e.length;n--&&Qe.test(e.charAt(n)););return n}var Ze=/^\s+/;function et(e){return e&&e.slice(0,Ye(e)+1).replace(Ze,"")}function A(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var K=NaN,tt=/^[-+]0x[0-9a-f]+$/i,nt=/^0b[01]+$/i,rt=/^0o[0-7]+$/i,at=parseInt;function Q(e){if(typeof e=="number")return e;if(Ke(e))return K;if(A(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=A(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=et(e);var o=nt.test(e);return o||rt.test(e)?at(e.slice(2),o?2:8):tt.test(e)?K:+e}var _=function(){return te.Date.now()},it="Expected a function",ot=Math.max,lt=Math.min;function $(e,n,o){var r,a,b,g,t,c,l=0,y=!1,v=!1,k=!0;if(typeof e!="function")throw new TypeError(it);n=Q(n)||0,A(o)&&(y=!!o.leading,v="maxWait"in o,b=v?ot(Q(o.maxWait)||0,n):b,k="trailing"in o?!!o.trailing:k);function w(f){var h=r,R=a;return r=a=void 0,l=f,g=e.apply(R,h),g}function T(f){return l=f,t=setTimeout(u,n),y?w(f):g}function i(f){var h=f-c,R=f-l,F=n-h;return v?lt(F,b-R):F}function s(f){var h=f-c,R=f-l;return c===void 0||h>=n||h<0||v&&R>=b}function u(){var f=_();if(s(f))return m(f);t=setTimeout(u,i(f))}function m(f){return t=void 0,k&&r?w(f):(r=a=void 0,g)}function p(){t!==void 0&&clearTimeout(t),l=0,r=c=a=t=void 0}function S(){return t===void 0?g:m(_())}function x(){var f=_(),h=s(f);if(r=arguments,a=this,c=f,h){if(t===void 0)return T(c);if(v)return clearTimeout(t),t=setTimeout(u,n),w(c)}return t===void 0&&(t=setTimeout(u,n)),g}return x.cancel=p,x.flush=S,x}const st={defense:!0,color:"#c0c4cc",opacity:.5,size:16,family:"serif",angle:-20,width:300,height:200},Y=j(document.body);function Z(e=Y){let n,o,r=null;const a={watermarkElMutationObserver:void 0,parentElMutationObserver:void 0,parentElResizeObserver:void 0},b=(i,s={})=>{if(!e.value)return console.warn("请在 DOM 挂载完成后再调用 setWatermark 方法设置水印");n=i,o={...st,...s},r?t():g(),v(e.value)},g=()=>{const i=e.value.tagName.toLowerCase()===Y.value.tagName.toLowerCase(),s=i?"fixed":"absolute",u=i?"":"relative";r=document.createElement("div"),r.style.pointerEvents="none",r.style.top="0",r.style.left="0",r.style.position=s,r.style.zIndex="99999";const{clientWidth:m,clientHeight:p}=e.value;t({width:m,height:p}),e.value.style.position=u,e.value.appendChild(r)},t=(i={})=>{r&&(n&&(r.style.background=`url(${c()}) left top repeat`),i.width&&(r.style.width=`${i.width}px`),i.height&&(r.style.height=`${i.height}px`))},c=()=>{const{color:i,opacity:s,size:u,family:m,angle:p,width:S,height:x}=o,f=document.createElement("canvas");f.width=S,f.height=x;const h=f.getContext("2d");return h&&(h.fillStyle=i,h.globalAlpha=s,h.font=`${u}px ${m}`,h.rotate(Math.PI/180*p),h.fillText(n,0,x/2)),f.toDataURL()},l=()=>{if(!(!e.value||!r)){k();try{e.value.removeChild(r)}catch{console.warn("水印元素已不存在，请重新创建")}finally{r=null}}},y=$(()=>{l(),g(),v(e.value)},100),v=i=>{o.defense?!a.watermarkElMutationObserver&&!a.parentElMutationObserver&&w(i):k("mutation"),a.parentElResizeObserver||T(i)},k=(i="all")=>{var s,u,m;(i==="mutation"||i==="all")&&((s=a.watermarkElMutationObserver)==null||s.disconnect(),a.watermarkElMutationObserver=void 0,(u=a.parentElMutationObserver)==null||u.disconnect(),a.parentElMutationObserver=void 0),(i==="resize"||i==="all")&&((m=a.parentElResizeObserver)==null||m.disconnect(),a.parentElResizeObserver=void 0)},w=i=>{const s=$(u=>{u.forEach($(m=>{switch(m.type){case"attributes":m.target===r&&y();break;case"childList":m.removedNodes.forEach(p=>{p===r&&i.appendChild(r)});break}},100))},100);a.watermarkElMutationObserver=new MutationObserver(s),a.parentElMutationObserver=new MutationObserver(s),a.watermarkElMutationObserver.observe(r,{attributes:!0,childList:!1,subtree:!1}),a.parentElMutationObserver.observe(i,{attributes:!1,childList:!0,subtree:!1})},T=i=>{const s=$(()=>{const{clientWidth:u,clientHeight:m}=i;t({width:u,height:m})},500);a.parentElResizeObserver=new ResizeObserver(s),a.parentElResizeObserver.observe(i)};return pe(()=>{l()}),{setWatermark:b,clearWatermark:l}}const ct={"un-mt-40px":"","un-flex-x-center":""},ut={"un-mt-20px":"","un-flex-x-center":""},bt=P({__name:"watermark",setup(e){const n=j(null),{setWatermark:o,clearWatermark:r}=Z(n),{setWatermark:a,clearWatermark:b}=Z();return(g,t)=>{const c=Le,l=Be;return ke(),xe("div",null,[d(c,{color:"var(--mobvue-primary-color)",background:"#ecf9ff","left-icon":"bulb-o",text:"支持局部、全局、自定义样式，并自带防御和自适应功能"}),N("div",{ref_key:"localRef",ref:n,class:"local","un-mt-40px":"","un-h-35vh":"","un-b-2px":"","un-b-dashed":"","un-b-primary":""},null,512),N("div",ct,[d(l,{type:"primary",size:"small",square:"",onClick:t[0]||(t[0]=y=>E(o)("局部水印",{color:"#409eff",width:200,height:150}))},{default:O(()=>t[4]||(t[4]=[C(" 创建局部水印 ")])),_:1}),d(l,{type:"warning",size:"small",square:"",onClick:t[1]||(t[1]=y=>E(o)("没有防御功能的局部水印",{color:"#e6a23c",defense:!1,width:200,height:150}))},{default:O(()=>t[5]||(t[5]=[C(" 创建无防御局部水印 ")])),_:1}),d(l,{type:"danger",size:"small",square:"",onClick:E(r)},{default:O(()=>t[6]||(t[6]=[C(" 清除局部水印 ")])),_:1},8,["onClick"])]),N("div",ut,[d(l,{type:"primary",size:"small",square:"",onClick:t[2]||(t[2]=y=>E(a)("全局水印",{color:"#409eff",width:200,height:150}))},{default:O(()=>t[7]||(t[7]=[C(" 创建全局水印 ")])),_:1}),d(l,{type:"warning",size:"small",square:"",onClick:t[3]||(t[3]=y=>E(a)("没有防御功能的全局水印",{color:"#e6a23c",defense:!1,width:200,height:150}))},{default:O(()=>t[8]||(t[8]=[C(" 创建无防御全局水印 ")])),_:1}),d(l,{type:"danger",size:"small",square:"",onClick:E(b)},{default:O(()=>t[9]||(t[9]=[C(" 清除全局水印 ")])),_:1},8,["onClick"])])])}}});export{bt as default};
