import{c as k,t as x,n as T,u as A,p as C,F as q,w as N,r as M,a as U}from"./index-Di9oelxG.js";import{B as D}from"./index-y8CYO8d2.js";import{C as I,F as O}from"./index-B0kQKGZl.js";import{_ as R}from"./Description.vue_vue_type_script_setup_true_lang-Ou6Q8eX7.js";import{q as y,m as i,r as $,k as j,A as z,z as V,x as G,y as H,H as K,u as m,C as W}from"./vue-CQrddh9_.js";import{u as Y}from"./use-expose-Bd0QOto_.js";const[J,L]=k("form"),Q={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:T,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:x,showErrorMessage:x,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var X=y({name:J,props:Q,emits:["submit","failed"],setup(u,{emit:f,slots:p}){const{children:s,linkChildren:r}=A(q),c=e=>e?s.filter(t=>e.includes(t.name)):s,g=e=>new Promise((t,n)=>{const o=[];c(e).reduce((F,P)=>F.then(()=>{if(!o.length)return P.validate().then(S=>{S&&o.push(S)})}),Promise.resolve()).then(()=>{o.length?n(o):t()})}),l=e=>new Promise((t,n)=>{const o=c(e);Promise.all(o.map(a=>a.validate())).then(a=>{a=a.filter(Boolean),a.length?n(a):t()})}),v=e=>{const t=s.find(n=>n.name===e);return t?new Promise((n,o)=>{t.validate().then(a=>{a?o(a):n()})}):Promise.reject()},_=e=>typeof e=="string"?v(e):u.validateFirst?g(e):l(e),h=e=>{typeof e=="string"&&(e=[e]),c(e).forEach(n=>{n.resetValidation()})},b=()=>s.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),d=(e,t)=>{s.some(n=>n.name===e?(n.$el.scrollIntoView(t),!0):!1)},w=()=>s.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),B=()=>{const e=w();_().then(()=>f("submit",e)).catch(t=>{f("failed",{values:e,errors:t});const{scrollToError:n,scrollToErrorPosition:o}=u;n&&t[0].name&&d(t[0].name,o?{block:o}:void 0)})},E=e=>{C(e),B()};return r({props:u}),Y({submit:B,validate:_,getValues:w,scrollToField:d,resetValidation:h,getValidationStatus:b}),()=>{var e;return i("form",{class:L(),onSubmit:E},[(e=p.default)==null?void 0:e.call(p)])}}});const Z=N(X);function ee(u){return M({url:"auth/login",method:"post",data:u})}const te={"un-h-full":"","un-flex-center":"","un-flex-col":"","un-select-none":""},ne={"un-mx-16px":"","un-my-24px":""},ue=y({__name:"index",setup(u){const f=H(),p=U(),s=$(!1),r=j({username:"admin",password:"12345678"});function c(){s.value=!0,ee(r).then(({data:g})=>{p.setToken(g.token),f.push("/")}).catch(()=>{r.password=""}).finally(()=>{s.value=!1})}return(g,l)=>{const v=O,_=I,h=D,b=Z;return G(),z("div",te,[i(R,{"un-mb-20px":""}),i(b,{onSubmit:c},{default:V(()=>[i(_,{inset:""},{default:V(()=>[i(v,{modelValue:m(r).username,"onUpdate:modelValue":l[0]||(l[0]=d=>m(r).username=d),name:"username",label:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),i(v,{modelValue:m(r).password,"onUpdate:modelValue":l[1]||(l[1]=d=>m(r).password=d),type:"password",name:"password",label:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])]),_:1}),K("div",ne,[i(h,{loading:m(s),type:"primary","native-type":"submit",round:"",block:""},{default:V(()=>l[2]||(l[2]=[W(" 登 录 ")])),_:1},8,["loading"])])]),_:1})])}}});export{ue as default};
