import{n as P,m as C,c as H,e as V,A as Y,l as Z,w as X,a as ee,D as te,b as ne,I as re,v as ie}from"./index-CLa7DgHf.js";import{N as ae}from"./index-DIAt6r9R.js";import{q as N,d as oe,m as u,r as J,L as le,A as se,H as L,z as T,u as w,x as ce,C as E}from"./vue-d1Hrfj2O.js";const[ue,M]=H("loading"),de=Array(12).fill(null).map((e,n)=>u("i",{class:M("line",String(n+1))},null)),fe=u("svg",{class:M("circular"),viewBox:"25 25 50 50"},[u("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),me={size:P,type:C("circular"),color:String,vertical:Boolean,textSize:P,textColor:String};var be=N({name:ue,props:me,setup(e,{slots:n}){const l=oe(()=>V({color:e.color},Y(e.size))),r=()=>{const c=e.type==="spinner"?de:fe;return u("span",{class:M("spinner",e.type),style:l.value},[n.icon?n.icon():c])},a=()=>{var c;if(n.default)return u("span",{class:M("text"),style:{fontSize:Z(e.textSize),color:(c=e.textColor)!=null?c:e.color}},[n.default()])};return()=>{const{type:c,vertical:v}=e;return u("div",{class:M([c,{vertical:v}]),"aria-live":"polite","aria-busy":!0},[r(),a()])}}});const ge=X(be),[ve,z]=H("button"),ye=V({},ne,{tag:C("button"),text:String,icon:String,type:C("default"),size:C("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:C("button"),loadingSize:P,loadingText:String,loadingType:String,iconPosition:C("left")});var pe=N({name:ve,props:ye,emits:["click"],setup(e,{emit:n,slots:l}){const r=ee(),a=()=>l.loading?l.loading():u(ge,{size:e.loadingSize,type:e.loadingType,class:z("loading")},null),c=()=>{if(e.loading)return a();if(l.icon)return u("div",{class:z("icon")},[l.icon()]);if(e.icon)return u(re,{name:e.icon,class:z("icon"),classPrefix:e.iconPrefix},null)},v=()=>{let i;if(e.loading?i=e.loadingText:i=l.default?l.default():e.text,i)return u("span",{class:z("text")},[i])},t=()=>{const{color:i,plain:p}=e;if(i){const b={color:p?i:"white"};return p||(b.background=i),i.includes("gradient")?b.border=0:b.borderColor=i,b}},y=i=>{e.loading?ie(i):e.disabled||(n("click",i),r())};return()=>{const{tag:i,type:p,size:b,block:x,round:O,plain:I,square:o,loading:d,disabled:f,hairline:m,nativeType:h,iconPosition:S}=e,k=[z([p,b,{plain:I,block:x,round:O,square:o,loading:d,disabled:f,hairline:m}]),{[te]:m}];return u(i,{type:h,class:k,style:t(),disabled:f,onClick:y},{default:()=>[u("div",{class:z("content")},[S==="left"&&c(),v(),S==="right"&&c()])]})}}});const he=X(pe);var xe=typeof global=="object"&&global&&global.Object===Object&&global,ke=typeof self=="object"&&self&&self.Object===Object&&self,K=xe||ke||Function("return this")(),R=K.Symbol,Q=Object.prototype,Oe=Q.hasOwnProperty,Se=Q.toString,B=R?R.toStringTag:void 0;function Te(e){var n=Oe.call(e,B),l=e[B];try{e[B]=void 0;var r=!0}catch{}var a=Se.call(e);return r&&(n?e[B]=l:delete e[B]),a}var we=Object.prototype,Ee=we.toString;function ze(e){return Ee.call(e)}var Ce="[object Null]",Ie="[object Undefined]",A=R?R.toStringTag:void 0;function je(e){return e==null?e===void 0?Ie:Ce:A&&A in Object(e)?Te(e):ze(e)}function Be(e){return e!=null&&typeof e=="object"}var Me="[object Symbol]";function We(e){return typeof e=="symbol"||Be(e)&&je(e)==Me}var Re=/\s/;function Le(e){for(var n=e.length;n--&&Re.test(e.charAt(n)););return n}var $e=/^\s+/;function Pe(e){return e&&e.slice(0,Le(e)+1).replace($e,"")}function _(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var D=NaN,_e=/^[-+]0x[0-9a-f]+$/i,Ne=/^0b[01]+$/i,qe=/^0o[0-7]+$/i,Ae=parseInt;function U(e){if(typeof e=="number")return e;if(We(e))return D;if(_(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=_(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Pe(e);var l=Ne.test(e);return l||qe.test(e)?Ae(e.slice(2),l?2:8):_e.test(e)?D:+e}var $=function(){return K.Date.now()},De="Expected a function",Ue=Math.max,Fe=Math.min;function W(e,n,l){var r,a,c,v,t,y,i=0,p=!1,b=!1,x=!0;if(typeof e!="function")throw new TypeError(De);n=U(n)||0,_(l)&&(p=!!l.leading,b="maxWait"in l,c=b?Ue(U(l.maxWait)||0,n):c,x="trailing"in l?!!l.trailing:x);function O(s){var g=r,j=a;return r=a=void 0,i=s,v=e.apply(j,g),v}function I(s){return i=s,t=setTimeout(f,n),p?O(s):v}function o(s){var g=s-y,j=s-i,q=n-g;return b?Fe(q,c-j):q}function d(s){var g=s-y,j=s-i;return y===void 0||g>=n||g<0||b&&j>=c}function f(){var s=$();if(d(s))return m(s);t=setTimeout(f,o(s))}function m(s){return t=void 0,x&&r?O(s):(r=a=void 0,v)}function h(){t!==void 0&&clearTimeout(t),i=0,r=y=a=t=void 0}function S(){return t===void 0?v:m($())}function k(){var s=$(),g=d(s);if(r=arguments,a=this,y=s,g){if(t===void 0)return I(y);if(b)return clearTimeout(t),t=setTimeout(f,n),O(y)}return t===void 0&&(t=setTimeout(f,n)),v}return k.cancel=h,k.flush=S,k}const Ge={defense:!0,color:"#c0c4cc",opacity:.5,size:16,family:"serif",angle:-20,width:300,height:200},F=J(document.body);function G(e=F){let n,l,r=null;const a={watermarkElMutationObserver:void 0,parentElMutationObserver:void 0,parentElResizeObserver:void 0},c=(o,d={})=>{if(!e.value)return console.warn("请在 DOM 挂载完成后再调用 setWatermark 方法设置水印");n=o,l={...Ge,...d},r?t():v(),b(e.value)},v=()=>{const o=e.value.tagName.toLowerCase()===F.value.tagName.toLowerCase(),d=o?"fixed":"absolute",f=o?"":"relative";r=document.createElement("div"),r.style.pointerEvents="none",r.style.top="0",r.style.left="0",r.style.position=d,r.style.zIndex="99999";const{clientWidth:m,clientHeight:h}=e.value;t({width:m,height:h}),e.value.style.position=f,e.value.appendChild(r)},t=(o={})=>{r&&(n&&(r.style.background=`url(${y()}) left top repeat`),o.width&&(r.style.width=`${o.width}px`),o.height&&(r.style.height=`${o.height}px`))},y=()=>{const{color:o,opacity:d,size:f,family:m,angle:h,width:S,height:k}=l,s=document.createElement("canvas");s.width=S,s.height=k;const g=s.getContext("2d");return g&&(g.fillStyle=o,g.globalAlpha=d,g.font=`${f}px ${m}`,g.rotate(Math.PI/180*h),g.fillText(n,0,k/2)),s.toDataURL()},i=()=>{if(!(!e.value||!r)){x();try{e.value.removeChild(r)}catch{console.warn("水印元素已不存在，请重新创建")}finally{r=null}}},p=W(()=>{i(),v(),b(e.value)},100),b=o=>{l.defense?!a.watermarkElMutationObserver&&!a.parentElMutationObserver&&O(o):x("mutation"),a.parentElResizeObserver||I(o)},x=(o="all")=>{var d,f,m;(o==="mutation"||o==="all")&&((d=a.watermarkElMutationObserver)==null||d.disconnect(),a.watermarkElMutationObserver=void 0,(f=a.parentElMutationObserver)==null||f.disconnect(),a.parentElMutationObserver=void 0),(o==="resize"||o==="all")&&((m=a.parentElResizeObserver)==null||m.disconnect(),a.parentElResizeObserver=void 0)},O=o=>{const d=W(f=>{f.forEach(W(m=>{switch(m.type){case"attributes":m.target===r&&p();break;case"childList":m.removedNodes.forEach(h=>{h===r&&o.appendChild(r)});break}},100))},100);a.watermarkElMutationObserver=new MutationObserver(d),a.parentElMutationObserver=new MutationObserver(d),a.watermarkElMutationObserver.observe(r,{attributes:!0,childList:!1,subtree:!1}),a.parentElMutationObserver.observe(o,{attributes:!1,childList:!0,subtree:!1})},I=o=>{const d=W(()=>{const{clientWidth:f,clientHeight:m}=o;t({width:f,height:m})},500);a.parentElResizeObserver=new ResizeObserver(d),a.parentElResizeObserver.observe(o)};return le(()=>{i()}),{setWatermark:c,clearWatermark:i}}const He={"un-mt-40px":"","un-flex-x-center":""},Ve={"un-mt-20px":"","un-flex-x-center":""},Qe=N({__name:"watermark",setup(e){const n=J(null),{setWatermark:l,clearWatermark:r}=G(n),{setWatermark:a,clearWatermark:c}=G();return(v,t)=>{const y=ae,i=he;return ce(),se("div",null,[u(y,{color:"var(--mobvue-primary-color)",background:"#ecf9ff","left-icon":"bulb-o",text:"支持局部、全局、自定义样式，并自带防御和自适应功能"}),L("div",{ref_key:"localRef",ref:n,class:"local","un-mt-40px":"","un-h-35vh":"","un-b-2px":"","un-b-dashed":"","un-b-primary":""},null,512),L("div",He,[u(i,{type:"primary",size:"small",square:"",onClick:t[0]||(t[0]=p=>w(l)("局部水印",{color:"#409eff",width:200,height:150}))},{default:T(()=>t[4]||(t[4]=[E(" 创建局部水印 ")])),_:1}),u(i,{type:"warning",size:"small",square:"",onClick:t[1]||(t[1]=p=>w(l)("没有防御功能的局部水印",{color:"#e6a23c",defense:!1,width:200,height:150}))},{default:T(()=>t[5]||(t[5]=[E(" 创建无防御局部水印 ")])),_:1}),u(i,{type:"danger",size:"small",square:"",onClick:w(r)},{default:T(()=>t[6]||(t[6]=[E(" 清除局部水印 ")])),_:1},8,["onClick"])]),L("div",Ve,[u(i,{type:"primary",size:"small",square:"",onClick:t[2]||(t[2]=p=>w(a)("全局水印",{color:"#409eff",width:200,height:150}))},{default:T(()=>t[7]||(t[7]=[E(" 创建全局水印 ")])),_:1}),u(i,{type:"warning",size:"small",square:"",onClick:t[3]||(t[3]=p=>w(a)("没有防御功能的全局水印",{color:"#e6a23c",defense:!1,width:200,height:150}))},{default:T(()=>t[8]||(t[8]=[E(" 创建无防御全局水印 ")])),_:1}),u(i,{type:"danger",size:"small",square:"",onClick:w(c)},{default:T(()=>t[9]||(t[9]=[E(" 清除全局水印 ")])),_:1},8,["onClick"])])])}}});export{Qe as default};
