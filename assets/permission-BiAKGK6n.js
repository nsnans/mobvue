import{e as p,n as A,c as D,u as U,W as F,w as $,h as z,t as O,X as Y,I as j,y as S,D as H,q as K,Y as L,a as G}from"./index-Crdp7owz.js";import{C as Q,a as T}from"./index-DJEGUnu3.js";import{_ as W}from"./NoticeBar.vue_vue_type_script_setup_true_lang-ha78P7FC.js";import{s as _,w as X,q as a,r as E,e as f,t as J,B as M,A as b,h as Z,u as V,Q as x,x as B,H as R,S as ee,y as P}from"./vue-D1nMtb7n.js";import"./use-expose-Kz9sjGV7.js";const[I,ne]=D("radio-group"),oe={shape:String,disabled:Boolean,iconSize:A,direction:String,modelValue:p,checkedColor:String},q=Symbol(I);var ae=_({name:I,props:oe,emits:["change","update:modelValue"],setup(e,{emit:i,slots:t}){const{linkChildren:d}=U(q),l=n=>i("update:modelValue",n);return X(()=>e.modelValue,n=>i("change",n)),d({props:e,updateValue:l}),F(()=>e.modelValue),()=>{var n;return a("div",{class:ne([e.direction]),role:"radiogroup"},[(n=t.default)==null?void 0:n.call(t)])}}});const te=$(ae),N={name:p,disabled:Boolean,iconSize:A,modelValue:p,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var le=_({props:z({},N,{bem:Y(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:O,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(e,{emit:i,slots:t}){const d=E(),l=o=>{if(e.parent&&e.bindGroup)return e.parent.props[o]},n=f(()=>{if(e.parent&&e.bindGroup){const o=l("disabled")||e.disabled;if(e.role==="checkbox"){const u=l("modelValue").length,c=l("max"),v=c&&u>=+c;return o||v&&!e.checked}return o}return e.disabled}),h=f(()=>l("direction")),r=f(()=>{const o=e.checkedColor||l("checkedColor");if(o&&e.checked&&!n.value)return{borderColor:o,backgroundColor:o}}),s=f(()=>e.shape||l("shape")||"round"),g=o=>{const{target:u}=o,c=d.value,v=c===u||(c==null?void 0:c.contains(u));!n.value&&(v||!e.labelDisabled)&&i("toggle"),i("click",o)},k=()=>{var o,u;const{bem:c,checked:v,indeterminate:y}=e,C=e.iconSize||l("iconSize");return a("div",{ref:d,class:c("icon",[s.value,{disabled:n.value,checked:v,indeterminate:y}]),style:s.value!=="dot"?{fontSize:S(C)}:{width:S(C),height:S(C),borderColor:(o=r.value)==null?void 0:o.borderColor}},[t.icon?t.icon({checked:v,disabled:n.value}):s.value!=="dot"?a(j,{name:y?"minus":"success",style:r.value},null):a("div",{class:c("icon--dot__icon"),style:{backgroundColor:(u=r.value)==null?void 0:u.backgroundColor}},null)])},m=()=>{const{checked:o}=e;if(t.default)return a("span",{class:e.bem("label",[e.labelPosition,{disabled:n.value}])},[t.default({checked:o,disabled:n.value})])};return()=>{const o=e.labelPosition==="left"?[m(),k()]:[k(),m()];return a("div",{role:e.role,class:e.bem([{disabled:n.value,"label-disabled":e.labelDisabled},h.value]),tabindex:n.value?void 0:0,"aria-checked":e.checked,onClick:g},[o])}}});const ie=z({},N,{shape:String}),[de,re]=D("radio");var ce=_({name:de,props:ie,emits:["update:modelValue"],setup(e,{emit:i,slots:t}){const{parent:d}=H(q),l=()=>(d?d.props.modelValue:e.modelValue)===e.name,n=()=>{d?d.updateValue(e.name):i("update:modelValue",e.name)};return()=>a(le,J({bem:re,role:"radio",parent:d,checked:l(),onToggle:n},e),K(t,["default","icon"]))}});const se=$(ce);function w(e){if(L(e)&&e.length>0){const{roles:i}=G();return i.some(t=>e.includes(t))}else return console.error("参数必须是一个数组且长度大于 0，参考：checkPermission(['admin', 'editor'])"),!1}const ke=_({__name:"permission",setup(e){const i=G(),t=E(i.roles[0]);function d(l){i.changeRoles(l)}return(l,n)=>{const h=se,r=T,s=Q,g=te,k=ee("permission");return P(),M("div",null,[a(W,{text:"基于权限指令、权限函数实现的按钮级控制"}),a(g,{modelValue:V(t),"onUpdate:modelValue":n[2]||(n[2]=m=>Z(t)?t.value=m:null),onChange:d},{default:b(()=>[a(s,{title:"切换用户",inset:""},{default:b(()=>[a(r,{title:"Admin 用户",onClick:n[0]||(n[0]=m=>t.value="admin")},{"right-icon":b(()=>[a(h,{name:"admin"})]),_:1}),a(r,{title:"Editor 用户",onClick:n[1]||(n[1]=m=>t.value="editor")},{"right-icon":b(()=>[a(h,{name:"editor"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(s,{title:"权限指令",inset:""},{default:b(()=>[x(a(r,{title:"Admin 可见",value:"Role admin"},null,512),[[k,["admin"]]]),x(a(r,{title:"Admin 或 Editor 可见",value:"Role admin or editor"},null,512),[[k,["admin","editor"]]])]),_:1}),a(s,{title:"权限函数",inset:""},{default:b(()=>[V(w)(["admin"])?(P(),B(r,{key:0,title:"Admin 可见",value:"Role admin"})):R("",!0),V(w)(["admin","editor"])?(P(),B(r,{key:1,title:"Admin 或 Editor 可见",value:"Role admin or editor"})):R("",!0)]),_:1})])}}});export{ke as default};
