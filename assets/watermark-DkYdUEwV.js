import{n as P,m as C,c as H,e as V,A as Y,l as Z,w as X,a as ee,D as te,b as ne,I as re,v as ie}from"./index-mIxYt0Fn.js";import{q as N,j as ae,m as u,r as J,L as oe,A as le,H as $,z as T,u as w,x as se,C as E}from"./vue-BFYFvDGA.js";import{_ as ce}from"./NoticeBar.vue_vue_type_script_setup_true_lang-BJJ_A_jJ.js";const[ue,W]=H("loading"),de=Array(12).fill(null).map((e,n)=>u("i",{class:W("line",String(n+1))},null)),fe=u("svg",{class:W("circular"),viewBox:"25 25 50 50"},[u("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),me={size:P,type:C("circular"),color:String,vertical:Boolean,textSize:P,textColor:String};var be=N({name:ue,props:me,setup(e,{slots:n}){const l=ae(()=>V({color:e.color},Y(e.size))),r=()=>{const c=e.type==="spinner"?de:fe;return u("span",{class:W("spinner",e.type),style:l.value},[n.icon?n.icon():c])},i=()=>{var c;if(n.default)return u("span",{class:W("text"),style:{fontSize:Z(e.textSize),color:(c=e.textColor)!=null?c:e.color}},[n.default()])};return()=>{const{type:c,vertical:y}=e;return u("div",{class:W([c,{vertical:y}]),"aria-live":"polite","aria-busy":!0},[r(),i()])}}});const ge=X(be),[ve,z]=H("button"),ye=V({},ne,{tag:C("button"),text:String,icon:String,type:C("default"),size:C("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:C("button"),loadingSize:P,loadingText:String,loadingType:String,iconPosition:C("left")});var pe=N({name:ve,props:ye,emits:["click"],setup(e,{emit:n,slots:l}){const r=ee(),i=()=>l.loading?l.loading():u(ge,{size:e.loadingSize,type:e.loadingType,class:z("loading")},null),c=()=>{if(e.loading)return i();if(l.icon)return u("div",{class:z("icon")},[l.icon()]);if(e.icon)return u(re,{name:e.icon,class:z("icon"),classPrefix:e.iconPrefix},null)},y=()=>{let a;if(e.loading?a=e.loadingText:a=l.default?l.default():e.text,a)return u("span",{class:z("text")},[a])},t=()=>{const{color:a,plain:p}=e;if(a){const g={color:p?a:"white"};return p||(g.background=a),a.includes("gradient")?g.border=0:g.borderColor=a,g}},d=a=>{e.loading?ie(a):e.disabled||(n("click",a),r())};return()=>{const{tag:a,type:p,size:g,block:x,round:O,plain:I,square:o,loading:f,disabled:m,hairline:b,nativeType:h,iconPosition:S}=e,k=[z([p,g,{plain:I,block:x,round:O,square:o,loading:f,disabled:m,hairline:b}]),{[te]:b}];return u(a,{type:h,class:k,style:t(),disabled:m,onClick:d},{default:()=>[u("div",{class:z("content")},[S==="left"&&c(),y(),S==="right"&&c()])]})}}});const he=X(pe);var xe=typeof global=="object"&&global&&global.Object===Object&&global,ke=typeof self=="object"&&self&&self.Object===Object&&self,K=xe||ke||Function("return this")(),R=K.Symbol,Q=Object.prototype,Oe=Q.hasOwnProperty,Se=Q.toString,M=R?R.toStringTag:void 0;function Te(e){var n=Oe.call(e,M),l=e[M];try{e[M]=void 0;var r=!0}catch{}var i=Se.call(e);return r&&(n?e[M]=l:delete e[M]),i}var we=Object.prototype,Ee=we.toString;function ze(e){return Ee.call(e)}var Ce="[object Null]",Ie="[object Undefined]",A=R?R.toStringTag:void 0;function je(e){return e==null?e===void 0?Ie:Ce:A&&A in Object(e)?Te(e):ze(e)}function Me(e){return e!=null&&typeof e=="object"}var We="[object Symbol]";function Be(e){return typeof e=="symbol"||Me(e)&&je(e)==We}var Re=/\s/;function $e(e){for(var n=e.length;n--&&Re.test(e.charAt(n)););return n}var Le=/^\s+/;function Pe(e){return e&&e.slice(0,$e(e)+1).replace(Le,"")}function _(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var D=NaN,_e=/^[-+]0x[0-9a-f]+$/i,Ne=/^0b[01]+$/i,qe=/^0o[0-7]+$/i,Ae=parseInt;function U(e){if(typeof e=="number")return e;if(Be(e))return D;if(_(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=_(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Pe(e);var l=Ne.test(e);return l||qe.test(e)?Ae(e.slice(2),l?2:8):_e.test(e)?D:+e}var L=function(){return K.Date.now()},De="Expected a function",Ue=Math.max,Fe=Math.min;function B(e,n,l){var r,i,c,y,t,d,a=0,p=!1,g=!1,x=!0;if(typeof e!="function")throw new TypeError(De);n=U(n)||0,_(l)&&(p=!!l.leading,g="maxWait"in l,c=g?Ue(U(l.maxWait)||0,n):c,x="trailing"in l?!!l.trailing:x);function O(s){var v=r,j=i;return r=i=void 0,a=s,y=e.apply(j,v),y}function I(s){return a=s,t=setTimeout(m,n),p?O(s):y}function o(s){var v=s-d,j=s-a,q=n-v;return g?Fe(q,c-j):q}function f(s){var v=s-d,j=s-a;return d===void 0||v>=n||v<0||g&&j>=c}function m(){var s=L();if(f(s))return b(s);t=setTimeout(m,o(s))}function b(s){return t=void 0,x&&r?O(s):(r=i=void 0,y)}function h(){t!==void 0&&clearTimeout(t),a=0,r=d=i=t=void 0}function S(){return t===void 0?y:b(L())}function k(){var s=L(),v=f(s);if(r=arguments,i=this,d=s,v){if(t===void 0)return I(d);if(g)return clearTimeout(t),t=setTimeout(m,n),O(d)}return t===void 0&&(t=setTimeout(m,n)),y}return k.cancel=h,k.flush=S,k}const Ge={defense:!0,color:"#c0c4cc",opacity:.5,size:16,family:"serif",angle:-20,width:300,height:200},F=J(document.body);function G(e=F){let n,l,r=null;const i={watermarkElMutationObserver:void 0,parentElMutationObserver:void 0,parentElResizeObserver:void 0},c=(o,f={})=>{if(!e.value)return console.warn("请在 DOM 挂载完成后再调用 setWatermark 方法设置水印");n=o,l={...Ge,...f},r?t():y(),g(e.value)},y=()=>{const o=e.value.tagName.toLowerCase()===F.value.tagName.toLowerCase(),f=o?"fixed":"absolute",m=o?"":"relative";r=document.createElement("div"),r.style.pointerEvents="none",r.style.top="0",r.style.left="0",r.style.position=f,r.style.zIndex="99999";const{clientWidth:b,clientHeight:h}=e.value;t({width:b,height:h}),e.value.style.position=m,e.value.appendChild(r)},t=(o={})=>{r&&(n&&(r.style.background=`url(${d()}) left top repeat`),o.width&&(r.style.width=`${o.width}px`),o.height&&(r.style.height=`${o.height}px`))},d=()=>{const{color:o,opacity:f,size:m,family:b,angle:h,width:S,height:k}=l,s=document.createElement("canvas");s.width=S,s.height=k;const v=s.getContext("2d");return v&&(v.fillStyle=o,v.globalAlpha=f,v.font=`${m}px ${b}`,v.rotate(Math.PI/180*h),v.fillText(n,0,k/2)),s.toDataURL()},a=()=>{if(!(!e.value||!r)){x();try{e.value.removeChild(r)}catch{console.warn("水印元素已不存在，请重新创建")}finally{r=null}}},p=B(()=>{a(),y(),g(e.value)},100),g=o=>{l.defense?!i.watermarkElMutationObserver&&!i.parentElMutationObserver&&O(o):x("mutation"),i.parentElResizeObserver||I(o)},x=(o="all")=>{var f,m,b;(o==="mutation"||o==="all")&&((f=i.watermarkElMutationObserver)==null||f.disconnect(),i.watermarkElMutationObserver=void 0,(m=i.parentElMutationObserver)==null||m.disconnect(),i.parentElMutationObserver=void 0),(o==="resize"||o==="all")&&((b=i.parentElResizeObserver)==null||b.disconnect(),i.parentElResizeObserver=void 0)},O=o=>{const f=B(m=>{m.forEach(B(b=>{switch(b.type){case"attributes":b.target===r&&p();break;case"childList":b.removedNodes.forEach(h=>{h===r&&o.appendChild(r)});break}},100))},100);i.watermarkElMutationObserver=new MutationObserver(f),i.parentElMutationObserver=new MutationObserver(f),i.watermarkElMutationObserver.observe(r,{attributes:!0,childList:!1,subtree:!1}),i.parentElMutationObserver.observe(o,{attributes:!1,childList:!0,subtree:!1})},I=o=>{const f=B(()=>{const{clientWidth:m,clientHeight:b}=o;t({width:m,height:b})},500);i.parentElResizeObserver=new ResizeObserver(f),i.parentElResizeObserver.observe(o)};return oe(()=>{a()}),{setWatermark:c,clearWatermark:a}}const He={"un-mt-40px":"","un-flex-x-center":""},Ve={"un-mt-20px":"","un-flex-x-center":""},Qe=N({__name:"watermark",setup(e){const n=J(null),{setWatermark:l,clearWatermark:r}=G(n),{setWatermark:i,clearWatermark:c}=G();return(y,t)=>{const d=he;return se(),le("div",null,[u(ce,{text:"支持局部、全局、自定义样式，并自带防御和自适应功能"}),$("div",{ref_key:"localRef",ref:n,class:"local","un-mt-40px":"","un-h-35vh":"","un-b-2px":"","un-b-dashed":"","un-b-primary":""},null,512),$("div",He,[u(d,{type:"primary",size:"small",square:"",onClick:t[0]||(t[0]=a=>w(l)("局部水印",{color:"#409eff",width:200,height:150}))},{default:T(()=>t[4]||(t[4]=[E(" 创建局部水印 ")])),_:1}),u(d,{type:"warning",size:"small",square:"",onClick:t[1]||(t[1]=a=>w(l)("没有防御功能的局部水印",{color:"#e6a23c",defense:!1,width:200,height:150}))},{default:T(()=>t[5]||(t[5]=[E(" 创建无防御局部水印 ")])),_:1}),u(d,{type:"danger",size:"small",square:"",onClick:w(r)},{default:T(()=>t[6]||(t[6]=[E(" 清除局部水印 ")])),_:1},8,["onClick"])]),$("div",Ve,[u(d,{type:"primary",size:"small",square:"",onClick:t[2]||(t[2]=a=>w(i)("全局水印",{color:"#409eff",width:200,height:150}))},{default:T(()=>t[7]||(t[7]=[E(" 创建全局水印 ")])),_:1}),u(d,{type:"warning",size:"small",square:"",onClick:t[3]||(t[3]=a=>w(i)("没有防御功能的全局水印",{color:"#e6a23c",defense:!1,width:200,height:150}))},{default:T(()=>t[8]||(t[8]=[E(" 创建无防御全局水印 ")])),_:1}),u(d,{type:"danger",size:"small",square:"",onClick:w(c)},{default:T(()=>t[9]||(t[9]=[E(" 清除全局水印 ")])),_:1},8,["onClick"])])])}}});export{Qe as default};
